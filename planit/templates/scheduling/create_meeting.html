<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>GoGroup | Meetings made easy.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Loading Bootstrap -->
        <link href="/static/flat-ui-master/css/bootstrap.css" rel="stylesheet">
        <link href="/static/css/bootstrap-combined.min.css" rel="stylesheet">

        <!-- Loading Flat UI -->
        <link href="/static/flat-ui-master/css/flat-ui.css" rel="stylesheet">
        <link rel="shortcut icon" href="images/favicon.ico">

        <!-- Stylesheets -->
        <link href="/static/css/new.css" rel="stylesheet">

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
        <![endif]-->
</head>
<body>
    {% include "nav.html" %}
    <div class="span12">
        <div class="row">
            <div class="span7" id="create-new">
                <div style="text-align:left">
                            <h3>Group name:</h3>
                                <input id="group-name" type="text" style="padding: 10px"value placeholder="ex.) &quot;My Group&quot;">
                            <h3>Start Date:</h3>
                                <input type="text" class="" id="start-date-select" value placeholder="Click to select dates.">
                            <h3>End Date:</h3>
                                <input type="text" class="" id="end-date-select" value placeholder="Click to select dates.">
                            <h3>Duration:</h3>
                                <input type="text" class="" id="duration" value placeholder="ex.) 1.5 hours">       
                            <h3>Invitees:</h3>
                            <div id="invitees"></div>
                            <!--
                                <div>
                                    <input type="text" value placeholder="Name">
                                    <input type="text" value placeholder="Number"> &nbsp; <a href="#" id="plus-button"class="btn btn-primary btn-small">+</a>       
                                </div>
                            <!-- For each invitee added, display name, number, and delete option.
                            <div>
                                <span class="fui-cross-16"></span>&nbsp;&nbsp; FirstName LastName: (xxx) xxx-xxxx 

                            </div>
                            -->
                                    
                            <hr>
                            <!-- Send invite -->
                            <a href="#" onclick="confirmSend()" class="btn btn-large btn-primary btn-block">Send Invites</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

<script src="/static/flat-ui-master/js/jquery-1.8.2.min.js"></script>
<script src="/static/flat-ui-master/js/jquery-ui-1.10.0.custom.min.js"></script>
<script src="/static/flat-ui-master/js/jquery.dropkick-1.0.0.js"></script>
<script src="/static/flat-ui-master/js/application.js"></script>
<script type="text/javascript" src="/static/jsdatepick-calendar/jsDatePick.jquery.min.1.3.js"></script>

<!-- Calendar selector javascript and files -->
<link rel="stylesheet" type="text/css" media="all" href="/static/jsdatepick-calendar/jsDatePick_ltr.min.css" />
<script type="text/javascript" src="/static/jsdatepick-calendar/jquery.1.4.2.js"></script>
<script type="text/javascript" src="/static/jsdatepick-calendar/jsDatePick.jquery.min.1.3.js"></script>
<script type="text/javascript" src="/static/js/underscore.min.js"></script>
<script type="text/javascript" src="/static/js/backbone.min.js"></script>
<script type="text/javascript" src="/static/js/peoplelist.js"></script>
<script type="text/javascript" src="/static/js/ajaxSetup.js"></script>
<script type="text/javascript">
    var inviteesView;
    $(function(){
        setupAjaxCsrf();

        var options = {el: $("#invitees")};
        inviteesView = new PersonList.PersonListView(options);
        new JsDatePick({
            useMode:2,
            target:"start-date-select",
            dateFormat:"%d-%m-%Y"
        });

        new JsDatePick({
            useMode:2,
            target:"end-date-select",
            dateFormat:"%d-%m-%Y"
        });

    });
    function confirmSend() {
        var r=confirm("Clicking OK will send one text message to each invitee. Standard SMS rates apply. Rates are determined by the recipient's cellular provider and will be paid for by the recipient.");
        if (r) {
            var data = {};
            data["invitees"] = inviteesView.model.toJSON();
            data["name"] = $("#group-name").val();
            data["start"] = $("#start-date-select").val();
            data["end"] = $("#end-date-select").val();
            data["duration"] = $("#duration").val();
            $.ajax({
                type: "POST",
                url: "/scheduling/meeting/create/",
                data: JSON.stringify(data),
                contentType: "application/json",
                dataType: "json",
                success: function(data, textStatus, jqXHR) {
                    window.location = "/scheduling/meeting/" + data.pk;
                }
            });
            return false;
        }
    }
</script>
